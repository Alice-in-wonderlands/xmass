<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long Distance Christmas Postcard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind to use Inter font and define custom colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'christmas-red': '#B91C1C', // Dark Red
                        'christmas-green': '#065F46', // Dark Green
                        'gold': '#D97706', // Gold/Orange
                        'snow-white': '#F9FAFB',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        unfold: {
                            '0%': { transform: 'scaleY(0)' },
                            '100%': { transform: 'scaleY(1)' },
                        }
                    },
                    animation: {
                        fadeIn: 'fadeIn 1.5s ease-out',
                        unfold: 'unfold 0.5s ease-out',
                    }
                }
            }
        }
    </script>
    <style>
        /* Import Inter font from Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

        /* Custom scrollbar styling for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #B91C1C;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-track {
            background: #065F46;
        }

        /* ------------------------------------------- */
        /* Custom CSS for the Decorative Bow and Frame */
        /* ------------------------------------------- */

        /* The main bow container (Red) */
        .christmas-bow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 20; /* Above the content */
            pointer-events: none; /* Ensure clicks pass through */
        }

        /* The Ribbon Knot (Gold center) */
        .bow-knot {
            width: 30px;
            height: 30px;
            background-color: var(--tw-colors-gold);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 15px rgba(255, 255, 0, 0.5);
        }

        /* The Bow Loops (Red) */
        .bow-loop {
            width: 80px;
            height: 80px;
            background-color: var(--tw-colors-christmas-red);
            border: 4px solid var(--tw-colors-gold);
            border-radius: 50%;
            position: absolute;
            opacity: 0.95;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .loop-left {
            transform: translate(calc(-50% - 45px), calc(-50% - 15px)) rotate(-25deg);
        }

        .loop-right {
            transform: translate(calc(-50% + 15px), calc(-50% - 15px)) rotate(25deg);
        }

        /* The Tassel/Streamer (Green) */
        .bow-streamer {
            width: 15px;
            height: 100px;
            background-color: var(--tw-colors-christmas-green);
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: top center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .streamer-left {
            transform: translate(calc(-50% - 10px), calc(-50% + 10px)) rotate(-10deg);
            clip-path: polygon(0% 0%, 100% 0%, 100% 90%, 50% 100%, 0% 90%); /* V-cut */
        }

        .streamer-right {
            transform: translate(calc(-50% + 10px), calc(-50% + 10px)) rotate(10deg);
            clip-path: polygon(0% 0%, 100% 0%, 100% 90%, 50% 100%, 0% 90%); /* V-cut */
        }
    </style>
</head>

<body class="bg-christmas-green min-h-screen flex items-center justify-center p-4 font-sans">

    <!-- Main Application Container -->
    <div id="app-container" class="w-full max-w-4xl min-h-[70vh] flex flex-col items-center justify-center relative">

        <!-- Stage 1: The Postcard Cover (Màn hình bìa bưu thiếp) -->
        <div id="cover-stage" class="absolute inset-0 bg-christmas-red rounded-xl shadow-2xl flex flex-col items-center justify-center p-8 transition-all duration-500 cursor-pointer hover:scale-[1.01] hover:shadow-gold"
            onclick="openPostcard()">
            <div class="text-snow-white text-5xl md:text-7xl font-black tracking-widest animate-bounce">
                MERRY XMAS
            </div>
            <p class="text-snow-white text-xl mt-4 border-2 border-snow-white p-2 rounded-lg italic">
                Bưu Thiếp Từ Xa
            </p>
            <p class="text-gold text-sm mt-8">Nhấn vào bất cứ đâu để mở</p>
        </div>

        <!-- Stage 1.5: Password Overlay (Lớp phủ nhập mật khẩu) -->
        <div id="password-stage" class="absolute inset-0 bg-christmas-green/95 backdrop-blur-sm rounded-xl shadow-2xl hidden flex-col items-center justify-center p-8 animate-fadeIn">
            <div class="bg-snow-white p-8 rounded-xl shadow-2xl w-full max-w-sm text-center">
                <h2 class="text-3xl font-bold text-christmas-red mb-4">Nhập Mật Khẩu Cá Nhân</h2>
                <p class="text-sm text-christmas-green mb-6">Bạn phải biết tên người nhận để mở!</p>
                <input type="password" id="password-input" placeholder="Tên người nhận (ví dụ: gemma)"
                       class="w-full p-3 border-2 border-gold rounded-lg focus:outline-none focus:ring-2 focus:ring-christmas-red text-center text-lg mb-4"
                       onkeyup="if(event.key === 'Enter') checkPassword()">
                
                <button onclick="checkPassword()"
                        class="w-full px-8 py-3 text-xl font-bold bg-gold text-white rounded-full shadow-lg transition-all duration-300 hover:scale-[1.02] active:translate-y-1">
                    Mở Thư
                </button>
                <p id="error-message" class="text-christmas-red mt-3 hidden">Mật khẩu không đúng. Vui lòng thử lại!</p>
            </div>
        </div>

        <!-- Stage 2: The Card (Nội dung thiệp Giáng Sinh) -->
        <div id="card-stage" class="absolute inset-0 bg-snow-white rounded-xl shadow-2xl p-6 md:p-12 hidden flex-col overflow-y-auto animate-fadeIn"
            style="border: 8px solid; border-image: linear-gradient(45deg, #B91C1C, #D97706, #065F46) 1;">

            <!-- The Red Bow in the middle of the card (Chiếc nơ đỏ ở giữa) -->
            <div class="christmas-bow z-20">
                <div class="bow-streamer streamer-left"></div>
                <div class="bow-streamer streamer-right"></div>
                <div class="bow-loop loop-left"></div>
                <div class="bow-loop loop-right"></div>
                <div class="bow-knot"></div>
            </div>
            
            <!-- Letter Content will be dynamically inserted here (Nội dung thư cá nhân hóa) -->
            <div id="personalized-letter" class="text-center w-full max-w-lg mx-auto p-4 md:p-8 bg-snow-white/95 rounded-xl z-10">
                <!-- Content inserted by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        const coverStage = document.getElementById('cover-stage');
        const passwordStage = document.getElementById('password-stage');
        const cardStage = document.getElementById('card-stage');
        const passwordInput = document.getElementById('password-input');
        const errorMessage = document.getElementById('error-message');
        const personalizedLetter = document.getElementById('personalized-letter');
        const bow = document.querySelector('.christmas-bow');

        // Define the content for each friend (Định nghĩa nội dung thư cho từng người bạn)
        const letterContents = {
            caitlin: {
                title: "Dành tặng Caitlin thân yêu",
                message: "Caitlin à, Giáng Sinh này, dù xa cách, tớ vẫn luôn nhớ đến những kỷ niệm vui vẻ của chúng ta. Chúc cậu một mùa lễ hội ấm áp, an lành và hạnh phúc. Hy vọng chúng ta sẽ sớm gặp lại nhau!",
                signOff: "Yêu cậu nhiều, [Tên của bạn]"
            },
            sophie: {
                title: "Một bức thư ngọt ngào cho Sophie",
                message: "Sophie ơi, Giáng Sinh đến rồi! Tớ gửi lời chúc tốt đẹp nhất đến cậu. Hãy tận hưởng những khoảnh khắc tuyệt vời bên gia đình và bạn bè nhé. Cậu là một người bạn tuyệt vời và tớ rất nhớ cậu! Chúc Mừng Giáng Sinh!",
                signOff: "Thân mến, [Tên của bạn]"
            },
            dan: {
                title: "Gửi Dan, người bạn tuyệt vời!",
                message: "Này Dan, Giáng Sinh là dịp để nhớ về những người bạn như cậu. Hy vọng cậu đang có một khoảng thời gian nghỉ ngơi tuyệt vời. Hãy giữ ấm và có một kỳ nghỉ lễ thật nhiều niềm vui nhé. Nhớ giữ liên lạc nha!",
                signOff: "Người bạn, [Tên của bạn]"
            },
            gemma: {
                title: "Gemma, mùa lễ hội rực rỡ nhé!",
                message: "Gemma thân mến, tớ muốn gửi đến cậu những lời chúc Giáng Sinh ấm áp nhất. Dù không thể ở bên, tớ vẫn luôn nghĩ về cậu. Chúc cậu một năm mới tràn đầy may mắn và thành công. Merry Christmas!",
                signOff: "Với tất cả tình yêu thương, [Tên của bạn]"
            }
        };

        // Function to handle the initial postcard opening
        function openPostcard() {
            // Animate cover slide-out/fade
            coverStage.classList.remove('animate-bounce');
            coverStage.classList.add('opacity-0', 'scale-110');

            setTimeout(() => {
                coverStage.classList.add('hidden');
                // Show the password stage
                passwordStage.classList.remove('hidden');
                passwordStage.classList.add('flex');
                passwordInput.focus();
            }, 500); // Wait for the transition to finish
        }

        // Function to check the password and display the card
        function checkPassword() {
            // Get input and convert to lowercase for case-insensitive check
            const input = passwordInput.value.toLowerCase().trim();
            errorMessage.classList.add('hidden'); // Reset error message

            // Check if the input is one of the valid recipients
            if (letterContents.hasOwnProperty(input)) {
                // Correct password: hide password stage and show card stage
                passwordStage.classList.add('hidden');
                cardStage.classList.remove('hidden');
                cardStage.classList.add('flex');
                
                // Load the personalized content
                loadLetter(input);
            } else {
                // Incorrect password
                errorMessage.classList.remove('hidden');
                passwordInput.value = ''; // Clear input
                passwordInput.focus();
            }
        }

        // Function to insert the correct letter content
        function loadLetter(recipient) {
            const content = letterContents[recipient];
            
            // Generate the HTML for the letter
            const letterHtml = `
                <h2 class="text-3xl md:text-4xl font-extrabold text-christmas-red mb-6 border-b-2 pb-2 border-gold animate-fadeIn">
                    ${content.title}
                </h2>
                <div class="text-christmas-green text-lg leading-relaxed mb-6 mt-4 text-left">
                    <p class="mb-4">
                        ${content.message}
                    </p>
                    <p class="mt-8 text-right text-xl font-bold text-gold">
                        ${content.signOff}
                    </p>
                </div>
            `;
            
            // Insert the HTML into the card
            personalizedLetter.innerHTML = letterHtml;

            // Remove pointer events from the bow so the user can scroll the letter on mobile/small screens
            bow.style.pointerEvents = 'none'; 
        }

        // Initialize focus on the password field if it's visible (for testing/development)
        if (passwordStage.classList.contains('flex')) {
             passwordInput.focus();
        }
    </script>
</body>
</html>
